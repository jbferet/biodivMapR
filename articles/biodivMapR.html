<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produce diversity maps from optical images with biodivMapR • biodivMapR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Produce diversity maps from optical images with biodivMapR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">biodivMapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/biodivMapR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/biodivMapR_01.html">Get Sentinel-2 data and validation</a>
    </li>
    <li>
      <a href="../articles/biodivMapR_02.html">Produce features from original raster</a>
    </li>
    <li>
      <a href="../articles/biodivMapR_03.html">Produce diversity maps from a set of features</a>
    </li>
    <li>
      <a href="../articles/biodivMapR_04.html">Validation with ground information</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jbferet/biodivMapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Produce diversity maps from optical images with
biodivMapR</h1>
                        <h4 data-toc-skip class="author">Jean-Baptiste
Féret, Florian de Boissieu</h4>
            
            <h4 data-toc-skip class="date">2025-09-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jbferet/biodivMapR/blob/master/vignettes/biodivMapR.Rmd" class="external-link"><code>vignettes/biodivMapR.Rmd</code></a></small>
      <div class="hidden name"><code>biodivMapR.Rmd</code></div>

    </div>

    
    
<p>This tutorial describes the processing workflow for
<code>biodivMapR</code>. It goes through the different steps for the
production of spectral diversity maps using Sentinel-2 imagery. The
workflow is divided into three steps:</p>
<ul>
<li>Acquisition of the Sentinel-2 imagery Sentinel-2 is downloaded from
a STAC catalog using the package <a href="https://jbferet.gitlab.io/preprocs2/" class="external-link"><code>preprocS2</code></a>,
which is a wrapper of the <a href="https://brazil-data-cube.github.io/rstac/" class="external-link"><code>rstac</code></a>
and <a href="https://zivankaraman.github.io/CDSE/" class="external-link"><code>CDSE</code></a>
packages.</li>
</ul>
<p>The default STAC collection is <a href="https://planetarycomputer.microsoft.com/dataset/sentinel-2-l2a" class="external-link"><code>sentinel-2-l2a</code></a>
from the Planetary computer catalog.</p>
<ul>
<li>Preparation of the data <code>biodivMapR</code> requires a raster /
set of raster as input data. The first <code>biodivMapR v1</code> used
spectral transformations as initial pre-processing step. This included
reflectance normalization with a continuum removal, followed by a
spctral transformation (PCA, SPCA, MNF…).</li>
</ul>
<p><code>biodivMapR v2</code> now allows user to run the preprocessing
step of their choice. This can consist in computing spectral indices,
vegetation biophysical variables, or spectral transformation. This also
means that any type of input data can be used, as long as the input
rasters share the same footprint, spatial resolution and projection.</p>
<p>We provide a few examples here. Users can experiment with the method
of their choice</p>
<ul>
<li>
<p>Definition of the processing parameters This includes the
following information:</p>
<ul>
<li>input / output files paths</li>
<li>output spatial resolution (window size)</li>
<li>pre-processing and processing options</li>
</ul>
</li>
<li>
<p>Computation of the diversity maps This includes several diversity
metrics:</p>
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math>
diversity maps as defined in <a href="https://doi.org/10.1890/13-1824.1" title="Feret&amp;Asner2014" class="external-link">Feret &amp; Asner (2014)</a> and <a href="https://doi.org/10.1111/2041-210X.13310" title="Feret&amp;deBoissieu2019" class="external-link">Feret &amp; de Boissieu (2019)</a>
</li>
<li>Functional diversity maps, including Richness, Evenness and
Divergence as defined in <a href="https://doi.org/10.1890/07-1206.1" title="Villeger2008" class="external-link">Villeger et al. (2008)</a>
</li>
</ul>
</li>
</ul>
<div class="section level3">
<h3 id="biodivmapr-v1">biodivMapR v1<a class="anchor" aria-label="anchor" href="#biodivmapr-v1"></a>
</h3>
<p>Please refer to the branch <a href="https://github.com/jbferet/biodivMapR/tree/dev_v1" class="external-link"><code>dev_v1</code></a>
of the package for the previous versions and tutorials. Vignettes and
tutorials corresponding to this version are still available <a href="https://github.com/jbferet/biodivMapR/tree/dev_v1/vignettes" class="external-link">here</a>.</p>
<p>We recommend using the most-up-to-date versions of
<code>biodivMapR</code>, as the previous ones will not be
maintained.</p>
<!-- * Partitioning of spectral diversity into $\alpha$ and $\beta$ components following an adaptation of the method proposed by [Laliberte et al. (2020)](https://doi.org/10.1111/ele.13429 "Laliberte2020") -->
<!-- * Comparison between spectral diversity metrics and ground observations


Below is the typical flow chart of the computation of diversity maps with __biodivMapR__ :

<img align="bottom" width="100%" height="100%" src="../man/figures/Figure1_FlowChart_biodivMapR_Process_600DPI.png">


[Please check the full tutorial pages to get instructions, data and code examples to run `biodivMapR`](https://jbferet.github.io/biodivMapR/articles/biodivMapR_01.html){target="_blank"} can be applied. -->
<!-- ## Partitioning of spectral diversity into $\alpha$ and $\beta$ components -->
<!-- The partitioning of spectral diversity is based on the `specdiv` function provided by [Etienne Laliberte on Github](https://github.com/elaliberte/specdiv "specdiv"). The original method does not use the exact same normalization, and only the framework starting from component selection is used here. Future versions will include the full original framework.  -->
<!-- ```{r Partitioning spectral diversity} -->
<!-- ################################################################################ -->
<!-- ## MAP PARTITIONING OF PLANT SPECTRAL DIVERSITY INTO ALPHA & BETA COMPONENTS  ## -->
<!-- ##        (Laliberte et al, 2020 https://doi.org/10.1111/ele.13429)           ## -->
<!-- ################################################################################ -->
<!-- PartitionSpectralDiversity <- map_partition_div(Original_Image_File = Input_Image_File, Partition_File = PCA_Files, -->
<!--                                                 Selected_Features = Selected_Features, Output_Dir = Output_Dir, -->
<!--                                                 window_size = window_size, TypePCA = TypePCA) -->
<!-- ``` -->
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jean-Baptiste Feret, Florian de Boissieu.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
